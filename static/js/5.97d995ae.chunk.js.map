{"version":3,"sources":["js/components/common/TextInput.js","js/redux/actions/AppActions.js","js/components/common/EditableCell.js","js/components/Todo.js","js/helpers/sorting.js","js/components/common/THeadCellWithSoring.js","js/helpers/common.js","js/pages/Todos.js","js/hooks/useSorting.js"],"names":["TextInput","value","onBlur","onChange","autoFocus","placeholder","type","className","e","target","defaultProps","GETTODOS","constants","PENDING","CHANGETODOTITLE","TOGGLETODOCOMPLETED","GETTODOSERROR","EditableCell","props","setEditingId","isEditing","ID","onToggleInputFocus","cn","onClick","onFocus","memo","item","onSelect","checked","handleChange","toggleCompleted","Title","DueDate","Completed","momentDate","moment","date","format","time","useCallback","toString","sortShouldReturn","order","sortIds","ids","objectWithItems","sortBy","sortOrder","sortingRules","sorted","sort","aKey","bKey","valueFormatter","aItem","bItem","a","b","THeadCellWithSoring","label","sortName","handleSort","defaultSortOrder","children","rest","isSorting","asc","classes","iconClasses","sortByCurrent","by","useMemo","getSortBy","onSort","convertArrayToString","arr","map","val","Number","Array","from","replace","each","charCodeAt","join","valueOf","JSON","parse","Todos","todos","loading","getTodos","changeTodoTitle","toggleTodoCompleted","useState","selectedItems","setSelectedItems","selectedAll","setSelectedAll","defaultSortBy","setSortBy","setSortOrder","useSorting","editingId","memoisedGetTodos","useEffect","todosIds","Object","keys","todosLength","length","sortingProps","isSelected","id","includes","handleSelectItem","filter","newSelectedItems","handleSelectAll","key","handleSetEditing","handleToggleTodoCompleted","sortedTodos","stopPropagation","disabled","connect","app","dispatch","Api","then","data","payload","err","console","error","params"],"mappings":"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","file":"static/js/5.97d995ae.chunk.js","sourcesContent":["import React from 'react';\nimport { string, bool, func } from 'prop-types';\n\nconst propTypes = {\n  value: string.isRequired,\n  onBlur: func,\n  onChange: func.isRequired,\n  autoFocus: bool,\n  placeholder: string,\n  type: string,\n};\n\nconst defaultProps = {\n  autoFocus: false,\n  placeholder: '',\n  type: 'text',\n  onBlur: () => false,\n};\n\nconst TextInput = ({ value, onBlur, onChange, autoFocus, placeholder, type }) => {\n  const handleChange = e => onChange(e.target.value);\n  return (\n    <input\n      type={type}\n      className=\"text_input\"\n      value={value}\n      onChange={handleChange}\n      onBlur={onBlur}\n      autoFocus={autoFocus}\n      placeholder={placeholder}\n    />\n  );\n};\n\nTextInput.propTypes = propTypes;\nTextInput.defaultProps = defaultProps;\n\nexport default TextInput;\n","import Api from '../../api';\nimport constants from '../constants/App';\n\nconst { GETTODOS, PENDING, CHANGETODOTITLE, TOGGLETODOCOMPLETED, GETTODOSERROR } = constants;\n\nexport function getTodos() {\n  return dispatch => {\n    dispatch({ type: PENDING });\n    return Api.todos\n      .getTodos()\n      .then(data => {\n        dispatch({\n          type: GETTODOS,\n          payload: data,\n        });\n      })\n      .catch(err => {\n        console.error({ err });\n        return dispatch({ type: GETTODOSERROR });\n      });\n  };\n}\n\nexport function changeTodoTitle(payload) {\n  return {\n    type: CHANGETODOTITLE,\n    payload,\n  };\n}\n\nexport function toggleTodoCompleted(payload) {\n  return {\n    type: TOGGLETODOCOMPLETED,\n    payload,\n  };\n}\n","import React from 'react';\nimport { string, bool, number, func } from 'prop-types';\nimport cn from 'classnames';\nimport TextInput from './TextInput';\n\nconst propTypes = {\n  onChange: func.isRequired,\n  value: string.isRequired,\n  setEditingId: func.isRequired,\n  isEditing: bool.isRequired,\n  className: string,\n  ID: number.isRequired,\n};\n\nconst defaultProps = {\n  className: '',\n};\n\nconst EditableCell = props => {\n  const { onChange, value, setEditingId, isEditing, className, ID } = props;\n\n  const onToggleInputFocus = () => {\n    setEditingId(null);\n    setEditingId(ID);\n  };\n  return (\n    <>\n      {!isEditing ? (\n        <td onClick={onToggleInputFocus} onFocus={onToggleInputFocus} className={className}>\n          {value}\n        </td>\n      ) : (\n        <td className={cn(className, { isEditing })}>\n          <TextInput value={value} onBlur={() => setEditingId(null)} onChange={onChange} />\n        </td>\n      )}\n    </>\n  );\n};\n\nEditableCell.propTypes = propTypes;\nEditableCell.defaultProps = defaultProps;\n\nexport default EditableCell;\n","import React, { memo, useCallback } from 'react';\nimport { string, bool, number, func, shape } from 'prop-types';\nimport cn from 'classnames';\nimport moment from 'moment';\nimport EditableCell from './common/EditableCell';\n\nconst propTypes = {\n  item: shape({\n    ID: number,\n    UserName: string,\n    DueDate: string,\n    Completed: bool,\n  }),\n  onSelect: func.isRequired,\n  checked: bool.isRequired,\n  handleChange: func.isRequired,\n  setEditingId: func.isRequired,\n  isEditing: bool.isRequired,\n  toggleCompleted: func.isRequired,\n};\n\nconst Todo = props => {\n  const { item, onSelect, checked, handleChange, setEditingId, isEditing, toggleCompleted } = props;\n  const { Title, ID, DueDate, Completed } = item;\n  const momentDate = moment(DueDate);\n  const date = momentDate.format('YYYY.MM.DD');\n  const time = momentDate.format('HH:mm');\n\n  const onChange = useCallback(value => handleChange({ ID, value }), [handleChange, ID]);\n\n  return (\n    <tr className={cn('todo', { checked })}>\n      <td className=\"todo_action\">\n        <input type=\"checkbox\" onChange={() => onSelect(ID)} checked={checked} />\n      </td>\n      <td className=\"todo_id\">{ID}</td>\n      <EditableCell\n        onChange={onChange}\n        value={Title}\n        ID={ID}\n        setEditingId={setEditingId}\n        isEditing={isEditing}\n        className=\"todo_title\"\n      />\n      <td>{`${date}__${time}`}</td>\n      <td className={`todo_status ${Completed ? 'completed' : ''}`} onClick={() => toggleCompleted([ID])}>\n        {Completed.toString()}\n      </td>\n    </tr>\n  );\n};\n\nTodo.propTypes = propTypes;\n\nexport default memo(Todo);\n","export const sortShouldReturn = order => (order === 'asc' ? 1 : -1);\n\nexport const standartSortCompare = order => (a, b) => {\n  if (a <= b) {\n    return -1 * sortShouldReturn(order);\n  }\n  return sortShouldReturn(order);\n};\n\nexport const sortIds = (ids, objectWithItems, sortBy, sortOrder, sortingRules) => {\n  let sorted = [...ids];\n  if (sortBy) {\n    sorted = sorted.sort((aKey, bKey) => {\n      const valueFormatter = sortingRules[sortBy];\n      const aItem = valueFormatter(objectWithItems[aKey][sortBy]);\n      const bItem = valueFormatter(objectWithItems[bKey][sortBy]);\n      return standartSortCompare(sortOrder)(aItem, bItem);\n    });\n  }\n  return sorted;\n};\n\nexport const getSortBy = (isSorting, asc, defaultSortOrder) => {\n  let by;\n  if (isSorting) {\n    if (asc) {\n      by = 'desc';\n    } else {\n      by = 'asc';\n    }\n  } else if (defaultSortOrder) {\n    by = defaultSortOrder;\n  } else {\n    by = 'asc';\n  }\n  return by;\n};\n","import React, { useMemo, memo, useCallback } from 'react';\nimport cn from 'classnames';\nimport { string, node, func } from 'prop-types';\nimport { getSortBy } from '../../helpers/sorting';\n\nconst propTypes = {\n  label: string.isRequired,\n  className: string,\n  sortOrder: string,\n  sortBy: string,\n  sortName: string.isRequired,\n  handleSort: func,\n  defaultSortOrder: string,\n  children: node,\n};\n\nconst defaultProps = {\n  className: '',\n  sortOrder: null,\n  sortBy: null,\n  defaultSortOrder: 'desc',\n};\n\nconst THeadCellWithSoring = props => {\n  const { label, className, sortOrder, sortBy, sortName, handleSort, defaultSortOrder, children, ...rest } = props;\n  const isSorting = sortName === sortBy;\n  const asc = sortOrder === 'asc';\n  const classes = cn('table-cell sorting', {\n    [className]: className,\n  });\n\n  const iconClasses = cn('sort_icon', {\n    sortByCurrent: isSorting,\n    [sortOrder]: sortOrder,\n  });\n\n  const by = useMemo(() => getSortBy(isSorting, asc, defaultSortOrder), [isSorting, asc, defaultSortOrder]);\n\n  const onSort = useCallback(() => {\n    handleSort(sortName, by);\n  }, [handleSort, sortName, by]);\n  return (\n    <th {...rest} className={classes} onClick={onSort}>\n      {label}\n      <span className={iconClasses}>{asc ? '/\\\\' : '\\\\/'}</span>\n      {children}\n    </th>\n  );\n};\n\nTHeadCellWithSoring.propTypes = propTypes;\nTHeadCellWithSoring.defaultProps = defaultProps;\n\nexport default memo(THeadCellWithSoring);\n","import moment from 'moment';\n\nexport const convertArrayToString = arr => arr.map(val => `${val}`);\n\nexport const getNumberFromString = val => Number(val);\n\nexport const getBinaryFromString = val =>\n  Number(\n    Array.from(val.replace(' ', ''))\n      .map(each => each.charCodeAt(0).toString(2))\n      .join('')\n  );\n\nexport const getNumberFromDate = val => moment(val).valueOf();\n\nexport const getNumberFromStringBool = val => Number(JSON.parse(val));\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { shape, string, number, bool, func, objectOf } from 'prop-types';\nimport { getTodos, changeTodoTitle, toggleTodoCompleted } from '../redux/actions/AppActions';\nimport Todo from '../components/Todo';\nimport THeadCellWithSoring from '../components/common/THeadCellWithSoring';\nimport { sortIds } from '../helpers/sorting';\nimport useSorting from '../hooks/useSorting';\nimport {\n  getNumberFromString,\n  getBinaryFromString,\n  getNumberFromDate,\n  getNumberFromStringBool,\n  convertArrayToString,\n} from '../helpers/common';\n\nconst sortingRules = {\n  ID: getNumberFromString,\n  Title: getBinaryFromString,\n  DueDate: getNumberFromDate,\n  Completed: getNumberFromStringBool,\n};\n\nconst defaultSortOrder = 'desc';\n\nconst propTypes = {\n  todos: objectOf(\n    shape({\n      ID: number,\n      UserName: string,\n      DueDate: string,\n      Completed: bool,\n    })\n  ),\n  loading: bool,\n  getTodos: func.isRequired,\n  changeTodoTitle: func.isRequired,\n  toggleTodoCompleted: func.isRequired,\n};\n\nconst defaultProps = {\n  todos: {},\n  loading: false,\n};\n\nconst Todos = ({ todos, loading, getTodos, changeTodoTitle, toggleTodoCompleted }) => {\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [selectedAll, setSelectedAll] = useState(false);\n  const [sortBy, sortOrder, handleSort] = useSorting(null, defaultSortOrder);\n  const [editingId, setEditingId] = useState(null);\n\n  const memoisedGetTodos = useCallback(() => getTodos(), [getTodos]);\n\n  useEffect(() => {\n    memoisedGetTodos();\n  }, [memoisedGetTodos]);\n\n  const todosIds = Object.keys(todos);\n  const todosLength = todosIds.length;\n  const sortingProps = {\n    sortBy,\n    sortOrder,\n    handleSort,\n    defaultSortOrder,\n  };\n\n  const isSelected = useCallback(id => selectedItems.includes(id), [selectedItems]);\n\n  const handleSelectItem = useCallback(\n    ID => {\n      if (isSelected(ID)) {\n        setSelectedItems(selectedItems.filter(item => item !== ID));\n        setSelectedAll(false);\n      } else {\n        const newSelectedItems = [...selectedItems, ID];\n        setSelectedItems(newSelectedItems);\n        if (newSelectedItems.length === todosLength) {\n          setSelectedAll(true);\n        }\n      }\n    },\n    [selectedItems, todosLength, setSelectedAll, isSelected, setSelectedItems]\n  );\n\n  const handleSelectAll = useCallback(\n    ({ target: { checked } }) => {\n      setSelectedAll(checked);\n      if (checked) {\n        setSelectedItems(todosIds.map(key => todos[key].ID));\n      } else {\n        setSelectedItems([]);\n      }\n    },\n    [todos, todosIds, setSelectedItems, setSelectedAll]\n  );\n\n  const handleSetEditing = useCallback((id = null) => setEditingId(id), [setEditingId]);\n\n  const handleToggleTodoCompleted = useCallback((ids = []) => toggleTodoCompleted(convertArrayToString(ids)), [\n    toggleTodoCompleted,\n  ]);\n\n  const handleToggleSelectedTodoCompleted = e => {\n    e.stopPropagation();\n    toggleTodoCompleted(convertArrayToString(selectedItems));\n  };\n\n  const sortedTodos = sortIds(todosIds, todos, sortBy, sortOrder, sortingRules);\n\n  return (\n    <>\n      {!loading && sortedTodos.length ? (\n        <table className=\"todos container\">\n          <thead>\n            <tr>\n              <th>\n                <input type=\"checkbox\" onChange={handleSelectAll} checked={selectedAll} />\n              </th>\n              <THeadCellWithSoring label=\"№\" sortName=\"ID\" {...sortingProps} />\n              <THeadCellWithSoring label=\"Название\" sortName=\"Title\" {...sortingProps} />\n              <THeadCellWithSoring label=\"Время\" sortName=\"DueDate\" {...sortingProps} />\n              <THeadCellWithSoring label=\"Статус\" sortName=\"Completed\" className=\"todo_header_status\" {...sortingProps}>\n                {selectedItems.length ? (\n                  <button type=\"button\" onClick={handleToggleSelectedTodoCompleted} disabled={!selectedItems.length}>\n                    Изменить\n                  </button>\n                ) : null}\n              </THeadCellWithSoring>\n            </tr>\n          </thead>\n          <tbody>\n            {sortedTodos.map(key => {\n              const item = todos[key];\n              return (\n                <Todo\n                  key={item.ID}\n                  item={item}\n                  onSelect={handleSelectItem}\n                  checked={isSelected(item.ID)}\n                  handleChange={changeTodoTitle}\n                  setEditingId={handleSetEditing}\n                  isEditing={editingId === item.ID}\n                  toggleCompleted={handleToggleTodoCompleted}\n                />\n              );\n            })}\n          </tbody>\n        </table>\n      ) : null}\n    </>\n  );\n};\n\nconst mapStateToProps = ({ app }) => {\n  const { todos, loading } = app;\n  return {\n    todos,\n    loading,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getTodos: () => dispatch(getTodos()),\n    changeTodoTitle: params => dispatch(changeTodoTitle(params)),\n    toggleTodoCompleted: params => dispatch(toggleTodoCompleted(params)),\n  };\n};\n\nTodos.propTypes = propTypes;\nTodos.defaultProps = defaultProps;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Todos);\n","import { useState, useCallback } from 'react';\n\nexport default (defaultSortBy = null, defaultSortOrder = null) => {\n  const [sortBy, setSortBy] = useState(defaultSortBy);\n  const [sortOrder, setSortOrder] = useState(defaultSortOrder);\n\n  const handleSort = useCallback(\n    (sortName, by) => {\n      setSortBy(sortName);\n      setSortOrder(by);\n    },\n    [setSortBy, setSortOrder]\n  );\n\n  return [sortBy, sortOrder, handleSort];\n};\n"],"sourceRoot":""}
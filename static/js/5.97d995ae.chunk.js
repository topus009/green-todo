(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[5],{88:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=function(e){var t=e.value,n=e.onBlur,a=e.onChange,c=e.autoFocus,o=e.placeholder,l=e.type;return r.a.createElement("input",{type:l,className:"text_input",value:t,onChange:function(e){return a(e.target.value)},onBlur:n,autoFocus:c,placeholder:o})};c.defaultProps={autoFocus:!1,placeholder:"",type:"text",onBlur:function(){return!1}},t.a=c},95:function(e,t,n){"use strict";n.r(t);var a=n(91),r=n(87),c=n(0),o=n.n(c),l=n(10),u=n(22),s=n(11),i=s.a.GETTODOS,d=s.a.PENDING,m=s.a.CHANGETODOTITLE,f=s.a.TOGGLETODOCOMPLETED,b=s.a.GETTODOSERROR;var g=n(89),O=n.n(g),p=n(90),h=n.n(p),E=n(88),j=function(e){var t=e.onChange,n=e.value,a=e.setEditingId,r=e.isEditing,c=e.className,l=e.ID,u=function(){a(null),a(l)};return o.a.createElement(o.a.Fragment,null,r?o.a.createElement("td",{className:O()(c,{isEditing:r})},o.a.createElement(E.a,{value:n,onBlur:function(){return a(null)},onChange:t})):o.a.createElement("td",{onClick:u,onFocus:u,className:c},n))};j.defaultProps={className:""};var C=j,v=Object(c.memo)((function(e){var t=e.item,n=e.onSelect,a=e.checked,r=e.handleChange,l=e.setEditingId,u=e.isEditing,s=e.toggleCompleted,i=t.Title,d=t.ID,m=t.DueDate,f=t.Completed,b=h()(m),g=b.format("YYYY.MM.DD"),p=b.format("HH:mm"),E=Object(c.useCallback)((function(e){return r({ID:d,value:e})}),[r,d]);return o.a.createElement("tr",{className:O()("todo",{checked:a})},o.a.createElement("td",{className:"todo_action"},o.a.createElement("input",{type:"checkbox",onChange:function(){return n(d)},checked:a})),o.a.createElement("td",{className:"todo_id"},d),o.a.createElement(C,{onChange:E,value:i,ID:d,setEditingId:l,isEditing:u,className:"todo_title"}),o.a.createElement("td",null,"".concat(g,"__").concat(p)),o.a.createElement("td",{className:"todo_status ".concat(f?"completed":""),onClick:function(){return s([d])}},f.toString()))})),N=n(12),k=n(93),D=function(e){return"asc"===e?1:-1},y=function(e,t,n,r,c){var o=Object(a.a)(e);return n&&(o=o.sort((function(e,a){var o,l=c[n],u=l(t[e][n]),s=l(t[a][n]);return(o=r,function(e,t){return e<=t?-1*D(o):D(o)})(u,s)}))),o},T=function(e){var t=e.label,n=e.className,a=e.sortOrder,r=e.sortBy,l=e.sortName,u=e.handleSort,s=e.defaultSortOrder,i=e.children,d=Object(k.a)(e,["label","className","sortOrder","sortBy","sortName","handleSort","defaultSortOrder","children"]),m=l===r,f="asc"===a,b=O()("table-cell sorting",Object(N.a)({},n,n)),g=O()("sort_icon",Object(N.a)({sortByCurrent:m},a,a)),p=Object(c.useMemo)((function(){return function(e,t,n){return e?t?"desc":"asc":n||"asc"}(m,f,s)}),[m,f,s]),h=Object(c.useCallback)((function(){u(l,p)}),[u,l,p]);return o.a.createElement("th",Object.assign({},d,{className:b,onClick:h}),t,o.a.createElement("span",{className:g},f?"/\\":"\\/"),i)};T.defaultProps={className:"",sortOrder:null,sortBy:null,defaultSortOrder:"desc"};var S=Object(c.memo)(T),I=function(e){return e.map((function(e){return"".concat(e)}))},_={ID:function(e){return Number(e)},Title:function(e){return Number(Array.from(e.replace(" ","")).map((function(e){return e.charCodeAt(0).toString(2)})).join(""))},DueDate:function(e){return h()(e).valueOf()},Completed:function(e){return Number(JSON.parse(e))}},B=function(e){var t=e.todos,n=e.loading,l=e.getTodos,u=e.changeTodoTitle,s=e.toggleTodoCompleted,i=Object(c.useState)([]),d=Object(r.a)(i,2),m=d[0],f=d[1],b=Object(c.useState)(!1),g=Object(r.a)(b,2),O=g[0],p=g[1],h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(c.useState)(e),a=Object(r.a)(n,2),o=a[0],l=a[1],u=Object(c.useState)(t),s=Object(r.a)(u,2),i=s[0],d=s[1],m=Object(c.useCallback)((function(e,t){l(e),d(t)}),[l,d]);return[o,i,m]}(null,"desc"),E=Object(r.a)(h,3),j=E[0],C=E[1],N=E[2],k=Object(c.useState)(null),D=Object(r.a)(k,2),T=D[0],B=D[1],P=Object(c.useCallback)((function(){return l()}),[l]);Object(c.useEffect)((function(){P()}),[P]);var F=Object.keys(t),G=F.length,x={sortBy:j,sortOrder:C,handleSort:N,defaultSortOrder:"desc"},M=Object(c.useCallback)((function(e){return m.includes(e)}),[m]),Y=Object(c.useCallback)((function(e){if(M(e))f(m.filter((function(t){return t!==e}))),p(!1);else{var t=[].concat(Object(a.a)(m),[e]);f(t),t.length===G&&p(!0)}}),[m,G,p,M,f]),A=Object(c.useCallback)((function(e){var n=e.target.checked;p(n),f(n?F.map((function(e){return t[e].ID})):[])}),[t,F,f,p]),H=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return B(e)}),[B]),J=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s(I(e))}),[s]),L=y(F,t,j,C,_);return o.a.createElement(o.a.Fragment,null,!n&&L.length?o.a.createElement("table",{className:"todos container"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,o.a.createElement("input",{type:"checkbox",onChange:A,checked:O})),o.a.createElement(S,Object.assign({label:"\u2116",sortName:"ID"},x)),o.a.createElement(S,Object.assign({label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",sortName:"Title"},x)),o.a.createElement(S,Object.assign({label:"\u0412\u0440\u0435\u043c\u044f",sortName:"DueDate"},x)),o.a.createElement(S,Object.assign({label:"\u0421\u0442\u0430\u0442\u0443\u0441",sortName:"Completed",className:"todo_header_status"},x),m.length?o.a.createElement("button",{type:"button",onClick:function(e){e.stopPropagation(),s(I(m))},disabled:!m.length},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"):null))),o.a.createElement("tbody",null,L.map((function(e){var n=t[e];return o.a.createElement(v,{key:n.ID,item:n,onSelect:Y,checked:M(n.ID),handleChange:u,setEditingId:H,isEditing:T===n.ID,toggleCompleted:J})})))):null)};B.defaultProps={todos:{},loading:!1};t.default=Object(l.b)((function(e){var t=e.app;return{todos:t.todos,loading:t.loading}}),(function(e){return{getTodos:function(){return e((function(e){return e({type:d}),u.a.todos.getTodos().then((function(t){e({type:i,payload:t})})).catch((function(t){return console.error({err:t}),e({type:b})}))}))},changeTodoTitle:function(t){return e({type:m,payload:t})},toggleTodoCompleted:function(t){return e({type:f,payload:t})}}}))(B)}}]);
//# sourceMappingURL=5.97d995ae.chunk.js.map